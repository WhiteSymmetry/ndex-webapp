<div class="row">

    <!-- One column only that takes all screen  -->
    <div class="col-md-12">

            <div class="networkViewFrame">
                <div class="networkViewHeaderHeader networkViewPadding" id="networkViewHeaderHeaderId">
                    {{networkController.currentNetwork.name}}
                </div>

                <div class="networkViewHeaderBody networkViewPadding" id="networkViewHeaderBodyId">
                    <span class="networkPropertyName">Nodes: </span>{{networkController.currentNetwork.nodeCount}}
                    &nbsp;&nbsp;
                    <span class="networkPropertyName">Edges: </span>{{networkController.currentNetwork.edgeCount}}
                    &nbsp;&nbsp;

                    <span class="networkPropertyName" ng-show="networkController.isAdmin">
                        <input type="checkbox"
                               ng-model="networkController.readOnlyChecked"
                               ng-change="readOnlyChanged()"> Read Only &nbsp;&nbsp;
                    </span>

                    <span class="networkVisibilityValue">{{networkController.currentNetwork.visibility}} </span> &nbsp;&nbsp;

                </div>
            </div>

    </div>
</div>

<div class="row rowWithOneLineTopPad"></div>

<div class="row">
    <div class="col-md-8">

        <div>

            <div class="cytoscapeCanvas" id="cytoscape-canvas" onresize="networkController.resizeCygraph()" ng-style="{background: networkController.bgColor}">
                <div id = "messageOverlay"
                     style="float:left; vdisplay: inline-block; position: absolute; top: 40px; left: 40px;font-size: 1.5em; color: #FF0000"
                   ng-show="networkController.isSample"  >(Showing top {{networkController.displayLimit}} edges)</div>
            </div>

            <div class="rowWithOneLineTopPad"></div>

            <div class="networkViewFrame networkActionsSection">

                <div class="btn-group">

                    <span ng-show='networkController.isLoggedIn &&
                                ((networkController.isAdmin || networkController.canEdit) && !networkController.readOnlyChecked)'>
                        <a class="btn btn-primary customButtonWidth">
                            <edit-network-summary-modal
                                    ndex-data='networkController.currentNetwork'>
                            Edit Network Profile
                            </edit-network-summary-modal>
                        </a>
                    </span>

                    <span ng-show='networkController.isLoggedIn
                        && ((networkController.currentNetwork.visibility == "PUBLIC")
                            || networkController.isAdmin
                            || networkController.canEdit
                            || networkController.canRead)'>

                            <a class="btn btn-primary customButtonWidth">
                                <create-export-network-task
                                        ndex-data='networkController.currentNetwork'>
                                    Export Network
                                </create-export-network-task>
                            </a>
                    </span>


                    <span ng-hide='networkController.isAdmin || !networkController.canEdit && !networkController.canRead'>
                        <a class="btn btn-primary customButtonWidth">
                            <create-request-network
                                    ndex-data='networkController.currentNetwork'
                                    privileges="networkController.privilegeLevel">
                                Ask for More Access!
                            </create-request-network>
                        </a>
                    </span>

                    <!--<span ng-hide='networkController.isAdmin || networkController.canEdit || networkController.canRead'>-->
                    <span ng-hide='true'>
                        <a class="btn btn-primary customButtonWidth">
                            <create-request-network
                                    ndex-data='networkController.currentNetwork'
                                    privileges="networkController.privilegeLevel">
                                Ask for Access Privileges!
                            </create-request-network>
                        </a>
                    </span>


                    <span ng-show='networkController.isLoggedIn && networkController.isAdmin'>
                        <a class="btn btn-primary customButtonWidth"
                           ng-href="{{'#/access/network/'+networkController.currentNetwork.externalId}}">
                                Manage Access
                        </a>
                    </span>

                    <span ng-show='networkController.isAdmin && networkController.currentNetworkSourceFormat=="BEL"'>
                        <a class="btn btn-primary customButtonWidth">
                            <archive-bel-namespaces ndex-data='networkController.currentNetwork.externalId'>
                                Archive BEL Namespaces
                            </archive-bel-namespaces>
                        </a>
                    </span>

                    <span ng-show='networkController.isAdmin && networkController.currentNetworkSourceFormat=="BEL" &&
                        networkController.numberOfBelNetworkNamespacesAsInt > 0'>
                        <a class="btn btn-primary customButtonWidth">
                            <download-bel-namespace ndex-network-uuid='networkController.currentNetwork.externalId'
                                                    ndex-network-name='networkController.currentNetwork.name'>
                                Download Namespace
                            </download-bel-namespace>
                        </a>
                    </span>

                    <span ng-show='(networkController.currentNetwork.visibility == "PUBLIC" || networkController.isAdmin ||
                        networkController.canEdit || networkController.canRead) && networkController.successfullyQueried'>
                        <a class="btn btn-primary customButtonWidth">
                            <save-subnetwork>
                                Save Query Result
                            </save-subnetwork>
                        </a>
                    </span>

                    <span class="divider" ng-show='networkController.isAdmin &&
                              !networkController.readOnlyChecked
                            || networkController.directIsAdmin
                            || networkController.directCanEdit
                            || networkController.directCanRead'>
                    </span>

                    <span ng-show='networkController.directIsAdmin
                            || networkController.directCanEdit
                            || networkController.directCanRead'>

                        <a class="btn btn-primary customButtonWidth">
                            <leave-network
                                    ndex-data='networkController.currentNetwork.externalId'>
                                Disaffiliate this Network
                            </leave-network>
                        </a>
                    </span>

                    <span ng-show='networkController.isLoggedIn && networkController.isAdmin &&
                                  !networkController.readOnlyChecked'>
                        <a class="btn btn-primary customButtonWidth">
                            <delete-network ndex-data='networkController.currentNetwork.externalId'>
                                Delete Network
                            </delete-network>
                        </a>
                    </span>

                    <span ng-show='!networkController.isLoggedIn'>
                        <a class="btn btn-primary" ng-click="main.startSignIn()">
                            Log in to operate on this network
                        </a>
                    </span>

                    <span>
                        <hr>

                        <form id="frmSearchNetwork"
                              ng-submit="networkController.submitNetworkQuery(config.networkQueryLimit)"
                              class="form-inline pull-left">

                            <div class="form-group">
                                <input class="form-control" type="search" ng-model="networkController.searchString"
                                       placeholder="Network Terms" required/>
                            </div>
                            <div class="form-group">
                                <label>Depth:</label>
                            </div>
                            <div class="form-group">
                                <span>
                                    <select
                                            class="form-control"
                                            id="selectSearchDepth"
                                            ng-model="networkController.searchDepth.value"
                                            ng-selected="1"
                                            ng-options="searchDepth.value as searchDepth.name for searchDepth in networkController.searchDepths"
                                            required>
                                    </select>
                                </span>
                            </div>

                            <button type="submit" class="btn btn-default btn-primary"
                                    style="margin-bottom:0">Run Query</button>
                            &nbsp;
                        </form>

                        <span class="pull-left" style="margin-top:0.5em">
                            <a ng-click="networkController.queryMode = 'advanced'"><u>Advanced Query</u></a>
                        </span>

                    </span>

                </div>
            </div>

        </div>

        <div class="rowWithOneLineTopPad"></div>

    </div>

    <div class="col-md-4">

        <div id="divNetworkTabs" class="networkPropertiesTabset">
            <tabset>

                <tab heading="{{ networkController.tabs[0].heading }}" active="networkController.tabs[0].active">

                    <div class="rowWithOneLineTopPad"></div>
                    <div class="rowWithOneLineTopPad"></div>

                    <div class="networkPropertyValueInTabsetMargins">

                        <span class="networkPropertyName">Created: </span>
                        {{networkController.currentNetwork.creationTime | date: 'medium'}} <br/>

                            <span ng-show="(networkController.currentNetwork.creationTime | date) !=
                                           (networkController.currentNetwork.modificationTime | date)">
                                <span class="networkPropertyName">Last Modified: </span>
                                {{networkController.currentNetwork.modificationTime | date: 'medium'}} <br/>
                            </span>

                        <span class="networkPropertyName">UUID: </span>
                        {{networkController.currentNetwork.externalId}}<br/>

                        <span class="networkPropertyName">Format: </span>
                        {{networkController.currentNetwork.sourceFormat}}<br/>

                            <span ng-show="networkController.privilegeLevel">
                                <span class="networkPropertyName">Your Privileges: </span>
                                {{networkController.privilegeLevel}}<br/>
                            </span>

                        <div class='wrapLongLine rowWithOneLineTopPad'
                             ng-show="networkController.currentNetwork.description"
                             style="margin-right: 1px;">
                            <span class="networkPropertyName">Description </span>
                            <span ng-bind-html="networkController.currentNetwork.description"></span>
                        </div>

                            <span ng-show="networkController.currentNetwork.rightsHolder">
                                <br/>
                                <span class="networkPropertyName">Rights Holder: </span>
                                <span ng-bind-html="networkController.currentNetwork.rightsHolder"></span>
                            </span>

                            <span ng-show="networkController.currentNetwork.rights">
                                <br/>
                                <span class="networkPropertyName">Rights: </span>
                                <span ng-bind-html="networkController.currentNetwork.rights"></span>
                            </span>


                        <div class='wrapLongLine rowWithOneLineTopPad'
                             ng-show="networkController.currentNetwork.reference"
                             style="margin-right: 1px;">
                            <span class="networkPropertyName">Reference </span>
                            <span ng-bind-html="networkController.currentNetwork.reference"></span>
                        </div>

                        <div class='rowWithOneLineTopPad' ng-show='networkController.currentNetwork.version'>
                            <span class="networkPropertyName">Version: </span>
                            {{networkController.currentNetwork.version}}
                        </div>

                        <div class='rowWithOneLineTopPad'>
                            <span class="networkPropertyName">Properties</span>

                            <div class="networkPropertiesNameMargins">

                                    <span class='' ng-repeat='property in networkController.otherProperties'>
                                        <span>
                                           <span class="networkPropertiesNameFont">{{property.predicateString}}:
                                           </span>
                                           <span class="networkPropertiesValueFont"
                                                 ng-hide='property.value.toString().length > 40'
                                                 ng-bind-html="property.value.toString()">
                                           </span>
                                           <span class="networkPropertiesValueFont"
                                                 ng-show='property.value.toString().length > 40'
                                                 ng-bind-html="property.value.slice(0, 45 - property.predicateString.length)
                                                +'&shy'+
                                               property.value.slice(45 - property.predicateString.length, property.value.length)">
                                           </span>
                                           <br/>
                                        </span>
                                    </span>

                            </div>

                            <h5 ng-show='!networkController.readOnlyChecked && (networkController.isAdmin || networkController.canEdit)'>
                                <a class='btn-link'
                                   ng-href="{{'#/properties/network/'+networkController.currentNetwork.externalId}}">
                                    Add / Edit Properties
                                </a>
                            </h5>

                        </div>

                    </div>

                    <div class="rowWithOneLineTopPad"></div>
                </tab>

                <!-- node/edge tab -->
                <tab heading="{{ networkController.tabs[1].heading }}" active="networkController.tabs[1].active">

                    <div>

                        <table style="width:100%">
                            <tr ng-if="networkController.selectionContainer.nodes.length > 0">
                                <td>Selected Nodes: {{networkController.selectionContainer.nodes.length}}</td>
                            </tr>

                            <tr ng-repeat-start="node in networkController.selectionContainer.nodes">
                                <td class="wrappedCell">
                                    <button ng-if="node.$$expanded" ng-click="node.$$expanded = false">-</button>
                                    <button ng-if="!node.$$expanded" ng-click="node.$$expanded = true">+</button>

                                    &nbsp;{{getNodeName(node)}}
                                </td>
                            </tr>
                            <tr ng-if="node.$$expanded" ng-repeat-end="">
                                <td class="wrappedCell">
                                    <span ng-repeat="attributeName in getNodeAttributesNames(node)">
                                        <span ng-show="getAttributeValue(attributeName, node[attributeName])">
                                            &nbsp;&nbsp;&nbsp;{{attributeName}} :
                                                              {{getAttributeValue(attributeName, node[attributeName])}}
                                            <br />
                                        </span>
                                    </span>
                                </td>
                            </tr>

                            <tr ng-if="networkController.selectionContainer.edges.length > 0">
                                <td>Selected Edges: {{ networkController.selectionContainer.edges.length}}</td>
                            </tr>
                            <tr ng-repeat-start="edge in networkController.selectionContainer.edges">
                                <td class="wrappedCell">
                                    <button ng-if="edge.$$expanded" ng-click="edge.$$expanded = false">-</button>
                                    <button ng-if="!edge.$$expanded" ng-click="edge.$$expanded = true">+</button>

                                    &nbsp;{{getEdgeLabel(edge)}}
                                </td>
                            </tr>
                            <tr ng-if="edge.$$expanded" ng-repeat-end="">
                                <td class="wrappedCell">

                                    <span ng-repeat="attributeName in getEdgeAttributesNames(edge)">
                                        <span ng-show="getAttributeValue(attributeName, edge[attributeName])">

                                            <span ng-switch="attributeName">

                                                <span ng-switch-when="citations">

                                                    <table style="width:100%">

                                                        <tr>
                                                            <td class="wrappedCell">
                                                                <span ng-repeat="citation in edge.citations">
                                                                    <span ng-bind-html='getCitation(citation)'></span>
                                                                    <br />
                                                                </span>

                                                            </td>
                                                        </tr>
                                                    </table>
                                                </span>

                                                <span ng-switch-default>
                                                   &nbsp;&nbsp;&nbsp;{{attributeName}} :
                                                                     {{getAttributeValue(attributeName, edge[attributeName])}}
                                                </span>

                                                <br />

                                            </span>
                                        </span>
                                    </span>

                                </td>
                            </tr>

                        </table>
                    </div>
                </tab>

                <tab heading="{{ networkController.tabs[2].heading }}" active="networkController.tabs[2].active" ng-click="build_provenance_view()">
                    <div class="row" style="font-size: 1.1em; margin-left: 0px; margin-right: 0px;">
                        <div class="col-xs-6">
                            <div id="provenanceNetwork"/>
                        </div>
                        <div class="col-xs-6">
                            <span ng-show="networkController.displayProvenance.webapp_url">
                                <a target="_blank" href="{{networkController.displayProvenance.webapp_url}}">
                                    <span ng-bind="getProvenanceTitle(networkController.displayProvenance)"></span>
                                </a><br/>
                            </span>
                            <span ng-show="!networkController.displayProvenance.webapp_url">
                                {{getProvenanceTitle(networkController.displayProvenance)}}<br/>
                            </span>
                            <span ng-show="(networkController.displayProvenance.properties == null ? 0 : networkController.displayProvenance.properties.length) > 0">
                                <table style="width:100%">
                                <!--<caption>Entity Properties</caption>-->
                                <tr><th>Name</th><th>Value</th></tr>
                                <tr><td>uuid</td><td>{{networkController.displayProvenance.uuid}}</td></tr>
                                <tr><td>host</td><td>{{networkController.displayProvenance.host}}</td></tr>

                                <tr ng-repeat="property in networkController.displayProvenance.properties">
                                    <td>
                                        {{property.name}}
                                    </td>
                                    <td class="wrappedCell">
                                        <span ng-bind-html="property.value"></span>
                                    </td>
                                </tr>

                            </table>
                            </span>
                            <br>

                            Generated By:
                            <b>{{networkController.displayProvenance.creationEvent.eventType}}</b>
                            <table style="width:100%">
                                <!--<caption>Event Properties</caption>-->
                                <tr>
                                    <th>Name</th>
                                    <th>Value</th>
                                </tr>
                                <tr ng-show="networkController.displayProvenance.creationEvent.startedAtTime == networkController.displayProvenance.creationEvent.endedAtTime">
                                    <td>event time</td>
                                    <td>{{networkController.displayProvenance.creationEvent.startedAtTime |
                                        date:'medium' }}
                                    </td>
                                </tr>
                                <tr ng-show="networkController.displayProvenance.creationEvent.startedAtTime != networkController.displayProvenance.creationEvent.endedAtTime">
                                    <td>start time</td>
                                    <td>{{networkController.displayProvenance.creationEvent.startedAtTime |
                                        date:'medium' }}
                                    </td>
                                </tr>
                                <tr ng-show="networkController.displayProvenance.creationEvent.startedAtTime != networkController.displayProvenance.creationEvent.endedAtTime">
                                    <td>end time</td>
                                    <td>{{networkController.displayProvenance.creationEvent.endedAtTime |
                                        date:'medium' }}
                                    </td>
                                </tr>
                                <tr ng-repeat="property in networkController.displayProvenance.creationEvent.properties">
                                    <td>
                                        {{property.name}}
                                    </td>
                                    <td class="wrappedCell">
                                        <span ng-bind-html="property.value"></span>
                                    </td>
                                </tr>
                            </table>


                        </div>
                    </div>
                </tab>

            </tabset>

        </div>

        <div class="rowWithOneLineTopPad"></div>

    </div>
</div>

<!--
    <div class="row">

        <div class="col-md-6">
            <pre>networkController.prettyStyle = {{networkController.prettyStyle}}</pre>
        </div>

        <div class="col-md-6">
            <pre>networkController.prettyVisualProperties = {{networkController.prettyVisualProperties}}</pre>
        </div>

    </div>
-->

</div>